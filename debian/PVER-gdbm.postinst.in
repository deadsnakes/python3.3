#! /bin/sh -e

if [ "$1" = configure ]; then
    (
    files=$(dpkg -L @PVER@-gdbm | sed -n '/^\/usr\/lib\/@PVER@\/.*\.py$/p')
	@PVER@ /usr/lib/@PVER@/py_compile.py $files
	if grep -sq '^byte-compile[^#]*optimize' /etc/python/debian_config; then
	    @PVER@ -O /usr/lib/@PVER@/py_compile.py $files
	fi
    )
fi

case "$1" in
    configure|abort-upgrade|abort-remove|abort-deconfigure)
        ;;
    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

#DEBHELPER#

exit 0
