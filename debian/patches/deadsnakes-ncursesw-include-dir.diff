# Add /usr/include/ncursesw for the _curses and _cursespanel modules. Prior to
# precise, libreadline-dev would pull in libncurses5-dev which provides
# /usr/include/curses.h; but that's kinda wrong and doesn't work in precise
# anymore (at least on amd64), so we just use the correct include path right
# away. See also:
# http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=650600

--- a/setup.py
+++ b/setup.py
@@ -1176,6 +1176,7 @@
         curses_defines = []
         curses_includes = []
         panel_library = 'panel'
+        ncursesw_incdirs = ["/usr/include/ncursesw"]
         if curses_library == 'ncursesw':
             curses_defines.append(('HAVE_NCURSESW', '1'))
             curses_includes.append('/usr/include/ncursesw')
@@ -1188,7 +1189,8 @@
             exts.append( Extension('_curses', ['_cursesmodule.c'],
                                    include_dirs=curses_includes,
                                    define_macros=curses_defines,
-                                   libraries = curses_libs) )
+                                   libraries = curses_libs,
+                                   include_dirs = ncursesw_incdirs) )
         elif curses_library == 'curses' and platform != 'darwin':
                 # OSX has an old Berkeley curses, not good enough for
                 # the _curses module.
@@ -1210,7 +1212,8 @@
             self.compiler.find_library_file(lib_dirs, panel_library)):
             exts.append( Extension('_curses_panel', ['_curses_panel.c'],
                                    include_dirs=curses_includes,
-                                   libraries = [panel_library] + curses_libs) )
+                                   libraries = [panel_library] + curses_libs,
+                                   include_dirs = ncursesw_incdirs) )
         else:
             missing.append('_curses_panel')
 
